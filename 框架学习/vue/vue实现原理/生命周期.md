# 生命周期

vue从初始化，到数据双向绑定，然后到template编译，再到patch过程，最后映射到真实DOM，在这个过程中的关键节点提供了一些生命周期钩子来让我们   
做一些事情，我们来看看这个过程以及钩子的实现

### 钩子是什么？

* 钩子是一种劫持机制
* 钩子是将需要执行的函数或者其他一系列动作注册到一个统一的入口，程序通过调用这个钩子来执行这些已经注册的函数。

写个简单的栗子
```javascript
let hookEvent = {
    "shangcesuo": function(){},
    "chifan": function(){},
    "playGames": function(){},
    "sleep": function(){}
};
function doHook(hookName){
    let handler = hookEvent[hookName];
    handler();
}
function shangban(){
    doHook("shangcesuo");
    //...
    doHook("chifan");
}
function fangjia(){
    doHook("playGames");
    //...
    doHook("sleep");
}
```
我们再看看vue中的callhook怎么实现的
```javascript
function callHook (vm, hook) {
    let handlers = vm.$options[hook];
    if (handlers) {
        for (let i = 0, j = handlers.length; i < j; i++) {
            handlers[i].call(vm);
        }
    }
    if (vm._hasHookEvent) {
        vm.$emit('hook:' + hook);
    }
}
```
跟之前的栗子没有太大的区别，由这段代码我们如果这样操作
 ```javascript
vm.$options["mounted"][0].call(vm);
```
那么`mounted`函数就能再执行一次了