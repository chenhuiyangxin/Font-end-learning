# 设计模式在项目中的实践

## 为什么要用设计模式

先看下设计模式中的两个原则

* 单一职责原则    
* 开放-封闭原则    

单一职责原则这样解释，对于一个类而言，应该仅有一个引起它变化的原因，如果能够想到多于一个动机去改变一个类，那么这个类就有多于一个职责，就该考虑职责分离了     

开放-封闭原则是这样的，对扩展是开发的，对更改是封闭的，这是面向对象设计的核心所在，遵循这个原则，就能带来可维护、可扩展、可复用的好处。     
应该对频繁变化的部分做出抽象，但是对每个部分都刻意的抽象不是一个好主意。拒绝不成熟的抽象与抽象本身一样重要

这两个原则中提到最多的就是变化，那什么是变化呢？    
对于一个正常的项目来说，变化就是日常迭代中产品逻辑的增删改。

比方说我这儿的实践，开始项目只在一个app中接入，关于这个app的协议方法分散的写在各处。如果永远只有一个app接入，那不会有问题。     
但是接下来又陆续接入很多app，甚至pc客户端、mac客户端。在原来写app协议的地方就要写很多个if-else分支用来判断场景再实现协议。

这对于维护、扩展来说简直就是噩梦，如果要改某个场景下协议的参数，或者删除对某个场景的支持，我们只能够去全局查找，还要确认     
好几遍以确保没有遗漏。然而这种模式必然会带来遗漏，最后造成bug。总结下来就是吃力不讨好。

我们从头来看，是什么导致了这种状况的发生？起因是业务发展，但真正的始作俑者是我们自己。     
所以，我们要懂业务，要知道手上的这个产品它解决了用户什么问题，业务体系内都有哪些服务，未来会朝着哪里发展，等等。    

还是刚才的例子，我们在接入了两个以上的app后才发觉这个问题，然后花大力气去把这个适配app的逻辑重构，最后也适应了业务的发展。     
这其实已经是比较好的结果了，更糟糕的是放任这些坏代码泛滥下去，最后想重构也无处下手，成为项目中的‘死区’。      
如果我们开始的时候站的高一些，看的远一些，知道接下来的业务发展目标之一就是增加接入方，那么从第一次实现协议方法的时候     
就能有一个好的设计。

刚刚说的两种方式都是比价好的模式，因为不是每个业务方向都那么清晰，有些方向是摸索着前进的，这种情况只要及时发现      
及时重构即可，也不能为赋新词强说愁。

## 什么是设计模式

## 实践

### 现状

我们用一段伪代码模拟下现状

```javascript
class APP {
    constructor() {
        
    }
}
```

   

 
