## 对象

### 语法

对象可以通过两种形式定义：声明形式以及构造形式
```javascript
//声明形式
var myObj = {
    key: value    
    // ...
    };
//构造形式
var myObj = new Objcet();myObj.key = value;
```
这两者生成的对象是一样的，通常构造形式非常少见，一般来说都会使用文字语法

### 类型

简单基本类型本身并不是对象    
js中有许多特殊的对象子类型，称之为复杂基本类型

#### 内容

对象的内容是由一些存储在特殊命名位置的值组成的，我们称之为属性

当我们说“内容”时，似乎在暗示这些值实际上被存储在对象内部，但这只是他的表现形式  

在引擎内部，这些值得存储方式是多种多样的，一般不会存储在对象内部  

存储在对象内部的是这些属性的名称，他就像指针一样，指向这些值的真正存储位置

属性名称永远是字符串，就算使用了以外的值来作为属性名，也会被转化成一个

#### 属性和方法

如果一个对象的属性是函数，我们习惯把它称为方法，然而从技术角度来说，函数永远不会属于一个对象   
所以“方法”这个称谓不太妥

#### 复制对象

复制对象，首先我们要考虑是浅复制还是深复制，深复制会导致死循环，然后还不确定如果复制一个函数    
意味着什么。

这些问题很长时间内都没有一个明确的答案

对于JSON安全的对象来说，有一种巧妙的复制方法
```javascript
var newObj = JSON.parse(JSON.stringify(someObj));
```
这种方法需要保证对象是JSON安全的，所以只适用于部分情况

相比于深复制，浅复制非常易懂且问题少得多，所以ES6定义了Object.assign()方法。    
该方法第一个参数是目标对象，之后还可以跟一个或者多个源对象，它会遍历这些对象所有可枚举的自有键并把它们    
复制到目标对象，最后返回目标对象

#### 属性描述符

从ES5开始，所有属性都具有了属性描述符
```javascript
var myObj = {
    a:2
};
Object.getOwnPropertyDescriptor(myObj,"a");
//{
//    value:2,
//    writable:true,
//    enumerable:true,
//    configurable:true
//}
```
可以看到一个普通的对象属性对应的属性描述符不仅仅是一个2，还包含了另外三个特性：    
writable(可写)、enumerable(可枚举)、configurable(可配置)

我们可以用Object.defineProperty()来添加一个属性或者修改一个已有属性（如果他是可配置的）
```javascript
var myObj = {};
Object.defineProperty(myObj,"a",{
    value:2,
    writable:true,
    enumerable:true,
    configurable:true
});
```
##### writable
```javascript
var myObj = {};
Object.defineProperty(myObj,"a",{
    value:2,
    writable:false,
    enumerable:true,
    configurable:true
});
myObj.a = 3
myObj.a;//2
```
当writable为false时，我们对属性值得修改默认失败了，当在严格模式下，还会报错

##### configurable

当把configurable的值修改为false时，使用defineProperty()就会报错，因此把configurable的值修改为false是单向操作，无法撤销

要注意的是，此时我们可以把writable的状态由true改为false，但是不能由false改为true

除了无法修改，`configurable:false`还会禁止删除这个属性

##### enumerable

当设为false时，这个属性不会出现在枚举中，但是还能够正常访问

#### 不变性

##### 对象常量
把一个属性的writable和configurable都设为false，就可以创建一个常量属性（不可修改、重定义或者删除）

##### 禁止扩展
要禁止一个对象添加新属性并且保留已有的属性，可以使用Object.preventExtensions()方法

##### 密封
Object.seal()方法，其实相当于把一个对象先调用Object.preventExtensions()，然后再将已有的属性都标记为`configurable:false`    
这样一来，密封之后既不能添加新属性，也不能重新配置或者删除现有属性

