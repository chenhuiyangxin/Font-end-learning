# 递归

平时在开发中常用到递归，比如要按某个规则展示图片，图片数量未知，这时候用递归会很舒服

然而，如果递归次数过多，很容易发生“栈溢出”错误。所以，我们要对递归进行优化

## 尾调用优化

函数的最后一步执行的是调用某个函数即尾调用
``` javascript
function c() {
     let a = 1;
     let b = 2;
     return d(a*b);
}
//等同于
d(2);
```
上述例子中，调用的d()时，c()函数的调用记录已经被删除了，只保留了d()的

所以，只要每层函数都是尾调用，那么调用记录永远只有一个，这就是尾调用优化了

## 尾递归

有了上述知识，递归优化就有办法了，先来个错误示范
``` javascript
//阶乘
function factorial(n){
     if(n === 1){return n};
     return n*factorial(n-1);
}
```
此处函数最后一句是调用了函数，但是执行的却是一个乘法，所以此处不是尾调，看下正确的
``` javascript
//阶乘
function factorial(n,total){
     if(n === 1){return total};
     return factorial(n-1,n*total);
}
```
其实就是增加了一个参数，将每步递归的结果保存下来，这样每步递归不用等它下层的函数返回结果就可以销毁调用记录了